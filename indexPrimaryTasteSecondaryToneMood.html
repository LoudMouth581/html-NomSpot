<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NomSpot Social Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    body { font-family: Arial, sans-serif; }
    #sidebar { float: left; width: 160px; padding: 1rem; background: #eee; height: 100vh; }
    #sidebar button { display: block; margin-bottom: 0.5rem; width: 100%; }
    #main { margin-left: 180px; padding: 1rem; }
    .tab { display: none; }
    #chat-box, #private-chat-box { border: 1px solid #ccc; height: 200px; overflow-y: auto; background: #fff; margin-bottom: 0.5rem; }
    .chat-message { padding: .25rem; }
    #sketchpad { border: 2px dashed #333; background: #fafafa; margin: .5rem 0; }
    #video-container video { width: 150px; margin: .25rem; background: black; }
    #video-container { display: flex; flex-wrap: wrap; }
  </style>
</head>
<body>
  <div id="sidebar">
    <button onclick="openTab('public')">Public Chat</button>
    <button onclick="openTab('private')">Private Chat</button>
    <button onclick="openTab('video')">Group Video Chat</button>
    <button onclick="openTab('sketch')">Doodle Board</button>
  </div>

  <div id="main">
    <div id="public" class="tab">
      <h2>Public Chat</h2>
      <div id="chat-box"></div>
      <input type="text" id="chatInput"><button onclick="sendMessage()">Send</button>
    </div>

    <div id="private" class="tab">
      <h2>Private Chat</h2>
      <input id="targetUser" placeholder="@username"><button onclick="startPrivateChat()">Start</button>
      <div id="private-chat-box"></div>
      <input id="privateInput" placeholder="Write..."><button onclick="sendPrivateMessage()">Send</button>
    </div>

    <div id="video" class="tab">
      <h2>Group Video Chat</h2>
      <div id="video-container">
        <video id="localVideo" autoplay muted></video>
      </div>
      <button onclick="startVideoCall()">Join Group Call</button>
    </div>

    <div id="sketch" class="tab">
      <h2>Doodle Board</h2>
      <canvas id="sketchpad" width="400" height="300"></canvas>
      <button onclick="clearCanvas()">Clear</button>
    </div>
  </div>

  <script>
    function openTab(id) {
      document.querySelectorAll('.tab').forEach(el => el.style.display = 'none');
      document.getElementById(id).style.display = 'block';
    }
    openTab('public');

    // Public + Private chat code as before...
    const tags = {}; // unchanged chat & tag logic omitted for brevity...

    // Band-aid Video using WebRTC
    let localStream;
    async function startVideoCall() {
      const videoEl = document.getElementById('localVideo');
      localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
      videoEl.srcObject = localStream;
      alert('Group call feature placeholder: requires signaling server (WebRTC setup)'); 
      /* Use RTCPeerConnection + signaling to add remote participants. Tools like SimpleWebRTC or Jitsi meet can help :contentReference[oaicite:1]{index=1} */
    }

    // Sketchpad code...
    const canvas = document.getElementById('sketchpad'), ctx = canvas.getContext('2d');
    let drawing = false;
    canvas.addEventListener('mousedown', () => drawing = true);
    canvas.addEventListener('mouseup', () => drawing = false);
    canvas.addEventListener('mousemove', e => {
      if (!drawing) return;
      const r = canvas.getBoundingClientRect();
      ctx.fillRect(e.clientX - r.left, e.clientY - r.top, 2, 2);
    });
    function clearCanvas() { ctx.clearRect(0, 0, canvas.width, canvas.height); }
  </script>
</body>
</html>
